`<template>
    <div id="app">
        <div class="container">
            <h1>UV-Vis Spectrometer Simulation</h1>

            <b-card>

                <b-card-body>
                    <line-with-line
                            :chart-data = "datacollection"
                            :options = "options"
                            :width = "400"
                            :height = "300"
                    ></line-with-line>
                </b-card-body>
                <b-card-footer>
                    <b-card-group>
                        <b-card >
                            <b-card-title >
                                Calibration <b-button size="sm" class="mb-1" variant="light" v-b-toggle.sidebar-calibration><b-icon-question-square></b-icon-question-square><span class="sr-only">Help</span></b-button>
                            </b-card-title>
                            <b-button size="sm" class="mb-1 mr-1" variant="info" @click="state.lamp ? stopLamp() : startLamp()">{{state.lamp ? 'Stop' : 'Start'}} Lamp</b-button>
                            <b-button size="sm" class="mb-1" :disabled="!state.lamp" variant="info" @click="storeReference()">Store Reference</b-button>
                            <b-row class="mb-1">
                                <b-col lg="12">
                                    <b-input-group size="sm" prepend="Integration Time" append="ms">
                                        <b-form-input v-model="state.integration" type="number" step="20"></b-form-input>
                                    </b-input-group>
                                </b-col>
                            </b-row>
                            <div v-if="state.lamp"><b-icon icon="brightness-high" variant="warning"></b-icon> Lamp On.</div>
                            <div v-else><b-icon icon="brightness-alt-low-fill" variant="dark"></b-icon> Lamp Off.</div>
                            <div v-show="state.lamp">
                                <span v-if="state.saturationWarning"><b-icon icon="exclamation-circle-fill" variant="danger"></b-icon> Detector Saturated.  Try changing the integration time.</span>
                                <span v-else-if="state.lowLampWarning"><b-icon icon="exclamation-circle-fill" variant="danger"></b-icon> Signal is low which will result in a low signal-to-noise ratio.  Try changing the integration time.</span>
                                <span v-else><b-icon icon="check-circle-fill" variant="success"></b-icon> Instrument Okay.</span>
                            </div>
                            <div v-if="!state.reference"><b-icon icon="file" variant="dark"></b-icon> No Reference Stored.</div>
                            <div v-else><b-icon icon="file-richtext" variant="dark"></b-icon> Reference Spectrum Stored.</div>
                        </b-card>
                        <b-card>
                            <b-card-title >
                                Display Settings <b-button size="sm" class="mb-1" variant="light" v-b-toggle.sidebar-display><b-icon-question-square></b-icon-question-square><span class="sr-only">Help</span></b-button>
                            </b-card-title>
                            <toggle-button id="toggleIntensity"
                                           :value="!datasets[0].hidden"
                                           :sync="true"
                                           @change="toggleHideForDataSet(0)"
                                           :labels="true"
                            ></toggle-button> Intensity
                            <br/>
                            <toggle-button id="toggleReferenceIntensity"
                                           :value="!datasets[1].hidden"
                                           :sync="true"
                                           @change="toggleHideForDataSet(1)"
                                           :labels="true"
                            ></toggle-button> Reference Intensity
                            <br/>
                            <toggle-button id="toggleSampleTransmittance"
                                           :value="!datasets[2].hidden"
                                           :sync="true"
                                           @change="toggleHideForDataSet(2); toggleAxis(1);"
                                           :labels="true"
                            ></toggle-button> Sample Transmittance
                            <br/>
                            <toggle-button id="toggleSampleTransmittance"
                                           :value="!datasets[3].hidden"
                                           :sync="true"
                                           @change="toggleHideForDataSet(3); toggleAxis(2);"
                                           :labels="true"
                            ></toggle-button> Sample Absorbance
                            <br/>

                        </b-card>
                        <b-card title="Sample Controls">
                            <div>
                                <b-select v-model="selected.sample">
                                    <b-select-option v-for="(sample,index) in samples" :value="index" v-bind:key="sample.name">{{sample.name}}</b-select-option>
                                </b-select>
                            </div>
                            <b-row class="mb-1">
                                <b-col lg="12">
                                    <b-input-group size="sm" prepend="Concentration" append="Î¼M">
                                        <b-form-input v-model="selected.concentration" type="number" step="1" :disabled="selected.sample===0"></b-form-input>
                                    </b-input-group>
                                </b-col>
                            </b-row>
                        </b-card>
                    </b-card-group>

                </b-card-footer>
            </b-card>
        </div>

        <b-sidebar
                id="sidebar-calibration"
                title="Instrument Calibration"
                bg-variant="dark"
                text-variant="light"
                backdrop
                shadow
        >
            <div class="px-3 py-2">
                <p>
                    The calibration settings allow you to control the lamp, the detector settings, and to store a reference spectrum for use in determining transmittance and absorbance.
                </p>

                <h4>Integration Time</h4>
                <p>The integration time is the length of time over which the detector is exposed to light for a measurement.  Longer times can increase the signal-to-noise ratio, but also slow the measurement frequency.  If the integration time is too long, the detector becomes saturated and can no longer distinguish differences in light intensity. If the integration time is too short, the signal-to-noise ratio will be low.</p>
                <h4>Reference Spectrum</h4>
                <p>Transmittance and absorbance are quantities that are computed by comparing to a reference measurement. The light output from the lamp across the spectrum is not uniform, the cuvette aborbs and scatters light, and the solvent absorbs and scatters light. For these reasons, a reference with only the cuvette and solvent is stored and used to compute the transmittance and absorbance by comparing the relative intensity of the sample to the reference intensity at each wavelength.</p>
            </div>
        </b-sidebar>

        <b-sidebar
                id="sidebar-display"
                title="Display Settings"
                bg-variant="dark"
                text-variant="light"
                backdrop
                shadow
        >
            <div class="px-3 py-2">
                <p>
                    The display settings allow you to control the different measurements.  Note that mousing over the chart will display the measured values at each wavelength.
                </p>

                <h4>Transmittance</h4>
                <p>Transmittance at each wavelength is defined as
                    $$T=\frac{I_{sample}-I_{dark}}{I_{ref}}$$
                    where $I_{sample}$ is the detector intensity with the sample,
                    $I_{dark}$ is the detector intensity with the lamp off (assumed to be zero in this simulation), and
                    $I_{ref}$ is the detector intensity from the stored reference.
                </p>
                <p>Percent transmittance is the transmittance times 100%.</p>
                <h4>Absorbance</h4>
                <p>
                    The transmittance does not vary linearly as a function of concentration.  The absorbance is a calculated quantity defined such that it will vary linearly as a function of concentration, assuming the system obeys the Beer-Lambert Law.
                    $$A=-log(T)$$
                    where log represents the base-10 logarithm.
                </p>
            </div>
        </b-sidebar>

    </div>
</template>

<script>
    import { ToggleButton } from 'vue-js-toggle-button'
    import LineWithLine from "./components/LineWithLine";

    export default {
        name: 'App',
        components: {
            LineWithLine, ToggleButton
        },
        data () {
            //The wavelengths are defined here and referenced in the returned object so that the length of this array can be referenced in the data object
            let wavelengths = [380, 380.9, 381.8, 382.7, 383.6, 384.5, 385.3, 386.2, 387.1, 388, 388.9, 389.8, 390.7, 391.6, 392.5, 393.4, 394.2, 395.1, 396, 396.9, 397.8, 398.7, 399.6, 400.5, 401.4, 402.3, 403.1, 404, 404.9, 405.8, 406.7, 407.6, 408.5, 409.4, 410.3, 411.2, 412, 412.9, 413.8, 414.7, 415.6, 416.5, 417.4, 418.3, 419.2, 420.1, 420.9, 421.8, 422.7, 423.6, 424.5, 425.4, 426.3, 427.2, 428.1, 429, 429.8, 430.7, 431.6, 432.5, 433.4, 434.3, 435.2, 436.1, 437, 437.8, 438.7, 439.6, 440.5, 441.4, 442.3, 443.2, 444.1, 445, 445.9, 446.7, 447.6, 448.5, 449.4, 450.3, 451.2, 452.1, 453, 453.9, 454.8, 455.6, 456.5, 457.4, 458.3, 459.2, 460.1, 461, 461.9, 462.8, 463.7, 464.5, 465.4, 466.3, 467.2, 468.1, 469, 469.9, 470.8, 471.7, 472.6, 473.4, 474.3, 475.2, 476.1, 477, 477.9, 478.8, 479.7, 480.6, 481.4, 482.3, 483.2, 484.1, 485, 485.9, 486.8, 487.7, 488.6, 489.5, 490.3, 491.2, 492.1, 493, 493.9, 494.8, 495.7, 496.6, 497.5, 498.4, 499.2, 500.1, 501, 501.9, 502.8, 503.7, 504.6, 505.5, 506.4, 507.3, 508.1, 509, 509.9, 510.8, 511.7, 512.6, 513.4, 514.2, 515, 515.8, 516.7, 517.5, 518.3, 519.1, 520, 520.8, 521.6, 522.4, 523.2, 524.1, 524.9, 525.7, 526.5, 527.3, 528.2, 529, 529.8, 530.6, 531.5, 532.3, 533.1, 533.9, 534.7, 535.6, 536.4, 537.2, 538, 538.9, 539.7, 540.5, 541.3, 542.1, 543, 543.8, 544.6, 545.4, 546.2, 547.1, 547.9, 548.7, 549.5, 550.4, 551.2, 552, 552.8, 553.6, 554.5, 555.3, 556.1, 556.9, 557.7, 558.6, 559.4, 560.2, 561, 561.9, 562.7, 563.5, 564.3, 565.1, 566, 566.8, 567.6, 568.4, 569.3, 570.1, 570.9, 571.7, 572.5, 573.4, 574.2, 575, 575.8, 576.6, 577.5, 578.3, 579.1, 579.9, 580.8, 581.6, 582.4, 583.2, 584, 584.9, 585.7, 586.5, 587.3, 588.1, 588.9, 589.6, 590.4, 591.1, 591.8, 592.6, 593.3, 594.1, 594.8, 595.6, 596.3, 597.1, 597.8, 598.5, 599.3, 600, 600.8, 601.5, 602.3, 603, 603.7, 604.5, 605.2, 606, 606.7, 607.5, 608.2, 609, 609.7, 610.4, 611.2, 611.9, 612.7, 613.4, 614.2, 614.9, 615.7, 616.4, 617.1, 617.9, 618.6, 619.4, 620.1, 620.9, 621.6, 622.3, 623.1, 623.8, 624.6, 625.3, 626.1, 626.8, 627.6, 628.3, 629, 629.8, 630.5, 631.3, 632, 632.8, 633.5, 634.3, 635, 635.7, 636.5, 637.2, 638, 638.7, 639.5, 640.2, 640.9, 641.7, 642.4, 643.2, 643.9, 644.7, 645.4, 646.2, 646.9, 647.6, 648.4, 649.1, 649.9, 650.6, 651.4, 652.1, 652.9, 653.6, 654.3, 655.1, 655.8, 656.6, 657.3, 658.1, 658.8, 659.5, 660.3, 661, 661.8, 662.5, 663.3, 664, 664.8, 665.5, 666.2, 667, 667.8, 668.5, 669.3, 670, 670.8, 671.5, 672.3, 673.1, 673.8, 674.6, 675.3, 676.1, 676.8, 677.6, 678.4, 679.1, 679.9, 680.6, 681.4, 682.1, 682.9, 683.7, 684.4, 685.2, 685.9, 686.7, 687.4, 688.2, 689, 689.7, 690.5, 691.2, 692, 692.7, 693.5, 694.3, 695, 695.8, 696.5, 697.3, 698, 698.8, 699.6, 700.3, 701.1, 701.8, 702.6, 703.3, 704.1, 704.9, 705.6, 706.4, 707.1, 707.9, 708.7, 709.5, 710.3, 711, 711.8, 712.6, 713.4, 714.1, 714.9, 715.7, 716.5, 717.3, 718, 718.8, 719.6, 720.4, 721.2, 721.9, 722.7, 723.5, 724.3, 725.1, 725.8, 726.6, 727.4, 728.2, 728.9, 729.7, 730.5, 731.3, 732.1, 732.8, 733.6, 734.4, 735.2, 736, 736.7, 737.5, 738.3, 739.1, 739.8, 740.6, 741.4, 742.2, 743, 743.7, 744.5, 745.3, 746.1, 746.9, 747.6, 748.4, 749.2, 750, 750.8, 751.5, 752.3, 753.1, 753.9, 754.6, 755.4, 756.2, 757, 757.8, 758.5, 759.3, 760.1, 760.9, 761.7, 762.4, 763.2, 764, 764.8, 765.5, 766.3, 767.1, 767.9, 768.7, 769.4, 770.2, 771, 771.8, 772.6, 773.3, 774.1, 774.9, 775.7, 776.5, 777.2, 778, 778.8, 779.6, 780.3, 781.1, 781.9, 782.7, 783.5, 784.2, 785, 785.8, 786.6, 787.4, 788.1, 788.9, 789.7, 790.5, 791.2, 792, 792.8, 793.6, 794.4, 795.1, 795.9, 796.7, 797.5, 798.3, 799, 799.8, 800.6, 801.4, 802.2, 802.9, 803.7, 804.5, 805.3, 806, 806.8, 807.6, 808.4, 809.2, 809.9, 810.7, 811.5, 812.3, 813.1, 813.8, 814.6, 815.4, 816.2, 817, 817.7, 818.5, 819.3, 820.1, 820.8, 821.6, 822.4, 823.2, 824, 824.7, 825.5, 826.3, 827.1, 827.9, 828.6, 829.4, 830.2, 831, 831.8, 832.6, 833.5, 834.5, 835.4, 836.3, 837.2, 838.1, 839.1, 840, 840.9, 841.8, 842.8, 843.7, 844.6, 845.5, 846.5, 847.4, 848.3, 849.2, 850.1, 851.1, 852, 852.9, 853.8, 854.8, 855.7, 856.6, 857.5, 858.5, 859.4, 860.3, 861.2, 862.1, 863.1, 864, 864.9, 865.8, 866.8, 867.7, 868.6, 869.5, 870.5, 871.4, 872.3, 873.2, 874.1, 875.1, 876, 876.9, 877.8, 878.8, 879.7, 880.6, 881.5, 882.5, 883.4, 884.3, 885.2, 886.1, 887.1, 888, 888.9, 889.8, 890.8, 891.7, 892.6, 893.5, 894.5, 895.4, 896.3, 897.2, 898.1, 899.1, 900];
            return {
                selected: {
                    lamp: 0,
                    sample: 0,
                    concentration: 0,
                    test: 0
                },
                state: {
                    lamp: false,
                    background: false,
                    integration: 300,
                    saturation: 3000,
                    saturationWarning: false,
                    lowLampWarning: false,
                    referenceWarning: false,
                    reference: false,
                    referenceIntegration: 0,
                    sample: false,
                },
                wavelengths: wavelengths,
                lamps: [{
                    name: 'Tungsten-Halogen',
                    intensity: [162.6874399, 165.9009741, 165.9130062, 165.1959181, 156.2199823, 159.6955167, 160.0986226, 157.9350012, 183.3122719, 178.8303201, 175.9238156, 175.9358477, 174.6528283, 165.6768925, 172.0909917, 180.7159551, 184.3581525, 185.9225929, 185.934625, 185.9466571, 185.9586892, 189.6926867, 204.1816758, 188.4930303, 222.2099421, 198.2270228, 216.8794293, 225.7051353, 225.7171674, 224.6109209, 221.6269637, 236.9376616, 232.9166777, 241.0877335, 243.0042134, 246.8520396, 250.9202987, 240.8208669, 274.4354077, 272.2004478, 270.9979497, 273.2569737, 275.324341, 269.3443945, 275.505447, 288.5185626, 292.8870604, 292.3631984, 286.3832518, 306.4578293, 301.9758774, 314.6927942, 312.8437529, 319.9931395, 340.3271374, 341.177954, 362.3747608, 381.9969047, 392.5130519, 386.5331054, 403.6490796, 423.5262554, 443.1483993, 444.2838511, 444.2958832, 440.5608712, 434.5809247, 454.2465321, 454.2585642, 474.3797126, 484.1968006, 493.9837342, 498.4897502, 502.9957663, 496.7270497, 489.7189729, 503.9329321, 503.9449641, 526.2492463, 553.2251821, 578.3724828, 562.2445906, 578.3753331, 576.4857807, 579.6617903, 620.5991105, 613.8701667, 657.3603969, 685.6053852, 667.4738183, 722.6867095, 738.1066866, 724.1170619, 789.068503, 785.7633253, 781.1657438, 808.6354487, 795.1655289, 834.9169699, 850.0317786, 836.5618588, 886.8898136, 906.5119575, 938.9070204, 924.4894983, 964.068765, 963.5695543, 971.0055948, 1015.952992, 1036.270378, 1060.36469, 1081.773095, 1121.613145, 1144.736818, 1153.567334, 1183.995874, 1258.416113, 1294.090666, 1347.782366, 1386.183765, 1367.942337, 1426.327942, 1461.333451, 1482.452542, 1521.175173, 1561.645425, 1594.957917, 1628.5882, 1648.856339, 1639.403171, 1687.510774, 1715.02894, 1719.695575, 1755.976546, 1757.635317, 1749.830928, 1770.100273, 1761.476472, 1803.727654, 1805.986678, 1808.245702, 1850.77722, 1818.644599, 1848.456201, 1837.664719, 1848.844159, 1859.653265, 1844.939838, 1860.680814, 1909.297662, 1882.395774, 1912.016253, 1950.312228, 1938.338966, 1954.047459, 1996.284335, 1988.432153, 2006.421988, 2019.117652, 2064.067522, 2076.062175, 2086.908216, 2108.173439, 2132.741265, 2174.424545, 2160.774772, 2204.736227, 2186.504466, 2217.180117, 2231.58161, 2251.724403, 2279.323441, 2258.363548, 2259.630316, 2273.707502, 2271.720871, 2269.342759, 2264.860807, 2260.87685, 2249.075382, 2235.770569, 2271.827047, 2277.82972, 2260.315184, 2264.289242, 2268.29459, 2270.236683, 2270.247379, 2270.258074, 2270.268769, 2270.279464, 2259.60904, 2246.304227, 2280.475228, 2282.664824, 2285.12812, 2267.274238, 2253.34823, 2289.379997, 2286.394703, 2298.632347, 2297.40376, 2309.818953, 2340.156973, 2324.216509, 2333.328379, 2355.975437, 2383.740094, 2362.793653, 2412.177277, 2418.179951, 2438.983224, 2462.961833, 2452.726633, 2503.069363, 2536.645103, 2538.842372, 2572.379416, 2553.498081, 2605.439257, 2629.885697, 2620.774862, 2618.675771, 2633.395387, 2646.47949, 2662.251436, 2629.928894, 2656.16086, 2662.11254, 2648.684804, 2662.39145, 2646.749421, 2667.733378, 2665.071862, 2643.45963, 2659.081563, 2645.77675, 2633.767303, 2623.791367, 2605.697552, 2584.992322, 2610.968257, 2570.051889, 2580.229454, 2584.803569, 2575.492071, 2561.810166, 2531.031208, 2513.550735, 2523.548062, 2508.46397, 2510.028678, 2514.932012, 2499.148025, 2502.359732, 2485.356416, 2488.673214, 2471.205968, 2480.177484, 2451.150313, 2446.167693, 2471.053199, 2475.935688, 2477.94371, 2475.579668, 2456.948652, 2448.019078, 2477.02261, 2471.788987, 2483.953328, 2497.817955, 2509.266545, 2519.045688, 2519.055047, 2519.065742, 2526.203968, 2533.704114, 2515.576192, 2540.43003, 2576.261688, 2586.88782, 2612.520932, 2605.284436, 2607.648341, 2606.71962, 2602.384918, 2638.175401, 2638.184759, 2677.859013, 2677.868371, 2683.807196, 2688.753519, 2680.774909, 2690.253035, 2717.527783, 2697.961229, 2749.94055, 2765.929855, 2733.690987, 2778.177047, 2764.635962, 2750.950706, 2731.175425, 2735.248868, 2751.097152, 2745.863529, 2739.882246, 2725.965931, 2702.008712, 2716.73192, 2695.713475, 2699.854572, 2668.169331, 2668.465925, 2645.214057, 2645.681971, 2612.902551, 2622.899877, 2594.719707, 2596.991527, 2546.937509, 2569.666453, 2544.225357, 2559.141925, 2514.35443, 2523.10209, 2485.58579, 2479.875533, 2467.572239, 2441.616357, 2458.289394, 2444.984581, 2434.148475, 2426.169865, 2415.245021, 2383.298497, 2363.158767, 2373.654088, 2364.5735, 2364.80728, 2371.859618, 2354.392372, 2324.384434, 2331.349668, 2331.360363, 2331.369722, 2328.423842, 2324.439885, 2321.484581, 2321.493939, 2321.504634, 2307.876621, 2293.269723, 2305.512704, 2293.837131, 2298.791048, 2331.254565, 2329.086358, 2327.189178, 2313.441961, 2297.139822, 2318.252659, 2335.417118, 2339.239553, 2338.874881, 2334.223812, 2315.538379, 2307.730751, 2302.415243, 2321.990524, 2325.812959, 2330.181457, 2326.771971, 2317.794698, 2309.939585, 2312.050483, 2292.884952, 2328.806337, 2304.849117, 2300.212942, 2331.724, 2331.733358, 2311.461978, 2307.47802, 2303.992058, 2288.903423, 2274.817525, 2258.977883, 2261.742407, 2257.798476, 2247.9662, 2256.71386, 2220.53768, 2230.588721, 2224.607438, 2199.957157, 2181.735572, 2161.179969, 2153.363454, 2163.629758, 2151.988047, 2134.759485, 2116.128469, 2082.243811, 2055.62349, 2043.736401, 2036.461034, 2029.471836, 1997.35511, 2010.245047, 1999.603336, 1928.087152, 1957.872725, 1953.000449, 1924.979582, 1901.809588, 1857.879107, 1879.118754, 1871.140145, 1864.158861, 1854.942897, 1844.966961, 1831.036695, 1792.242195, 1822.858415, 1798.901196, 1772.060055, 1740.970348, 1763.699292, 1718.477026, 1720.666622, 1721.89171, 1719.239303, 1710.694091, 1672.836427, 1650.519562, 1661.352613, 1646.526027, 1643.658193, 1647.66354, 1628.314821, 1628.325517, 1628.334875, 1612.673265, 1588.716045, 1612.122194, 1604.143584, 1597.162301, 1594.819197, 1596.827218, 1598.671431, 1598.682126, 1595.646097, 1558.958689, 1530.088388, 1544.080367, 1528.339188, 1531.879842, 1533.104962, 1511.384925, 1526.560824, 1504.602716, 1513.329017, 1519.479341, 1519.490036, 1519.500731, 1491.230629, 1488.818711, 1483.201353, 1451.254829, 1448.214559, 1446.476257, 1440.918999, 1428.945737, 1416.972475, 1394.079782, 1380.459646, 1391.089005, 1373.979761, 1353.439106, 1356.077105, 1347.466321, 1350.59511, 1355.351462, 1359.71996, 1333.678243, 1322.657027, 1312.906557, 1276.711497, 1244.764973, 1247.586816, 1259.391616, 1207.47183, 1232.231376, 1231.841438, 1197.211042, 1158.416543, 1181.345355, 1162.173295, 1144.897487, 1130.094327, 1142.093454, 1119.085016, 1087.138492, 1088.196274, 1047.636228, 1050.056424, 1014.00185, 1023.67004, 990.6172292, 997.1702349, 979.2049942, 985.9035942, 979.1953907, 973.5001868, 945.9727636, 960.3419894, 949.7002782, 933.8608706, 916.042373, 934.029004, 919.9621288, 923.6481727, 925.1122127, 910.2856275, 909.2906797, 910.0276753, 908.367377, 904.3834198, 900.4234058, 900.434101, 900.4447962, 899.6578148, 897.6711838, 895.6845528, 872.5178861, 884.8948271, 873.2531159, 860.7176612, 858.7310302, 856.7443992, 852.8080967, 848.1570271, 826.8904402, 800.8064289, 807.2474273, 811.6557632, 799.1118365, 823.2318115, 812.0608175, 814.203308, 788.6570078, 771.6904303, 781.9745237, 786.8203488, 780.8390653, 775.6054423, 769.6241589, 763.6428755, 760.4963877, 758.5097567, 756.0690203, 751.5870684, 744.8485126, 723.8886196, 736.77325, 705.7537474, 708.3005892, 694.3571622, 697.1243302, 689.1049452, 695.5747911, 699.3653885, 706.5444321, 660.0917158, 664.1891878, 667.4680189, 665.233059, 662.9980991, 660.7631392, 658.5281794, 629.7748724, 630.5272405, 620.8455231, 621.4292304, 620.3123694, 620.168861, 622.2416447, 615.5767612, 623.1028525, 607.732619, 603.2506671, 598.7687153, 592.0714539, 584.5948496, 562.5247951, 556.92657, 569.3659629, 561.8893586, 557.8059318, 555.5709719, 549.0420236, 534.0754461, 549.7670089, 554.6815689, 557.577344, 537.3664482, 514.9098974, 481.4195698, 491.3144033, 480.8162121, 474.1481843, 478.2456564, 479.9740333, 479.9860654, 479.9994344, 480.0114664, 474.1925322, 453.2326392, 474.6072613, 467.130657, 460.4017131, 453.6727693, 446.9438254, 443.4255959, 441.190636, 440.4709027, 440.4829347, 431.8234273, 416.8555129, 430.1421417, 427.7029098, 424.9245781, 419.9446316, 415.303965],
                    referenceIntegration: 200,
                }],
                samples: [{
                    name: 'Water',
                    absorbance: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    concentration: 0, //micromolar
                    relativeIntensity: [],
                }, {
                    name: 'Blue Dye',
                    absorbance: [0.1679,0.1702,0.1748,0.17825,0.18055,0.184,0.1886,0.19205,0.19435,0.19435,0.19665,0.1978,0.1978,0.19895,0.19895,0.19895,0.19895,0.19895,0.2001,0.20125,0.20355,0.2047,0.207,0.2093,0.2116,0.21505,0.21735,0.21965,0.22195,0.2231,0.2254,0.22655,0.2277,0.2277,0.2277,0.2277,0.22655,0.2254,0.22425,0.2231,0.2208,0.2162,0.2139,0.2116,0.2093,0.207,0.20355,0.20125,0.1978,0.1955,0.19205,0.18975,0.1863,0.184,0.18055,0.17825,0.17595,0.17365,0.17135,0.16905,0.16675,0.16445,0.161,0.1587,0.1564,0.1541,0.15295,0.15065,0.14835,0.1449,0.14375,0.14145,0.13915,0.13685,0.1357,0.1334,0.13225,0.12995,0.1265,0.1242,0.1219,0.1196,0.11845,0.11615,0.11385,0.11155,0.10925,0.10695,0.10465,0.1035,0.1012,0.10005,0.09775,0.0966,0.0943,0.09315,0.09085,0.08855,0.08625,0.08395,0.0828,0.0805,0.07935,0.0782,0.07705,0.07475,0.07245,0.0713,0.07015,0.069,0.06785,0.06555,0.0644,0.06325,0.06095,0.0598,0.05865,0.05865,0.0575,0.0552,0.0529,0.05175,0.0506,0.0506,0.0483,0.04715,0.046,0.04485,0.0437,0.04255,0.0414,0.04025,0.0391,0.0391,0.03795,0.03795,0.0368,0.03565,0.0345,0.0345,0.0345,0.03565,0.03565,0.03565,0.03565,0.03565,0.0368,0.03795,0.0391,0.0391,0.0391,0.0391,0.04025,0.0414,0.04255,0.04485,0.04485,0.04715,0.04715,0.0483,0.04945,0.0506,0.0529,0.05405,0.0552,0.0575,0.05865,0.06095,0.0621,0.0644,0.06555,0.0667,0.0667,0.06785,0.07015,0.07245,0.07475,0.07705,0.07935,0.0805,0.0805,0.08165,0.08395,0.0874,0.09085,0.09545,0.0966,0.09775,0.10005,0.10235,0.1058,0.1081,0.1104,0.11385,0.11615,0.11845,0.12075,0.1242,0.1288,0.13225,0.1357,0.138,0.1426,0.14605,0.15065,0.1541,0.1587,0.1633,0.16675,0.17135,0.1748,0.1794,0.184,0.18975,0.19435,0.19895,0.2047,0.2093,0.21505,0.2208,0.2254,0.23,0.2346,0.24035,0.2438,0.2484,0.253,0.25875,0.26335,0.2691,0.2737,0.27945,0.28405,0.2875,0.29095,0.2944,0.299,0.30245,0.30705,0.3128,0.3174,0.322,0.3266,0.3312,0.3358,0.3404,0.34615,0.3519,0.3588,0.36455,0.37145,0.37835,0.38525,0.3933,0.40135,0.41055,0.4186,0.42895,0.43815,0.44965,0.46,0.4715,0.48185,0.4945,0.50715,0.5198,0.53245,0.54625,0.5612,0.57615,0.5911,0.60605,0.61985,0.63595,0.65205,0.667,0.6831,0.6992,0.71645,0.73025,0.7452,0.76015,0.77625,0.7912,0.80385,0.8165,0.82685,0.8372,0.8464,0.8556,0.86135,0.8671,0.8717,0.87515,0.8763,0.8763,0.874,0.87055,0.86365,0.85675,0.84755,0.83835,0.8257,0.8119,0.79695,0.78085,0.7636,0.74405,0.7245,0.7038,0.6831,0.6601,0.63825,0.6141,0.5911,0.5681,0.5451,0.52095,0.4968,0.47495,0.45195,0.4301,0.4071,0.38525,0.36455,0.34385,0.3243,0.30705,0.28865,0.27255,0.2576,0.2415,0.2277,0.21275,0.20125,0.18975,0.1794,0.1679,0.15755,0.14835,0.13915,0.1311,0.12305,0.11615,0.10925,0.10235,0.0966,0.09085,0.08625,0.07935,0.07475,0.0713,0.0667,0.06325,0.0598,0.05635,0.0529,0.0506,0.0483,0.046,0.04255,0.04025,0.03795,0.03565,0.0345,0.03335,0.0322,0.0299,0.0276,0.02645,0.0253,0.0253,0.02415,0.023,0.02185,0.0207,0.01955,0.01955,0.01955,0.0184,0.0184,0.0161,0.0161,0.01495,0.01495,0.01495,0.01495,0.01495,0.0138,0.0138,0.01265,0.0138,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.0115,0.0115,0.0115,0.0115,0.0115,0.0115,0.01035,0.01035,0.01035,0.0115,0.0115,0.0115,0.0115,0.0115,0.01035,0.01035,0.01035,0.01035,0.0115,0.01035,0.01035,0.0092,0.01035,0.01035,0.01035,0.01035,0.0092,0.0092,0.0092,0.0092,0.0092,0.0092,0.0092,0.0092,0.0092,0.0092,0.0092,0.0092,0.0092,0.01035,0.01035,0.0092,0.01035,0.01035,0.01035,0.01035,0.01035,0.01035,0.01035,0.01035,0.0115,0.0115,0.0115,0.0115,0.01035,0.0115,0.0115,0.0115,0.01265,0.01265,0.01265,0.0115,0.0115,0.01035,0.0115,0.0115,0.01265,0.01265,0.0115,0.01265,0.0115,0.01265,0.0115,0.01265,0.01265,0.01265,0.0115,0.0115,0.0115,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.0138,0.01495,0.01495,0.01495,0.0138,0.01495,0.01495,0.01495,0.01495,0.0138,0.0138,0.0138,0.0138,0.01495,0.0138,0.0138,0.0138,0.0138,0.01495,0.01495,0.0138,0.0138,0.0138,0.01495,0.01495,0.0138,0.0138,0.0138,0.0138,0.01265,0.01265,0.01265,0.0138,0.0138,0.0138,0.0138,0.0138,0.0138,0.01495,0.01495,0.01495,0.01495,0.01495,0.0161,0.0161,0.0161,0.0161,0.0161,0.0161,0.0161,0.01495,0.01495,0.01495,0.01495,0.0138,0.0138,0.0138,0.0138,0.01495,0.0138,0.01495,0.01495,0.01495,0.0138,0.01495,0.0138,0.0138,0.0138,0.0138,0.0138,0.0138,0.0138,0.0138,0.0138,0.0138,0.01265,0.01265,0.0115,0.01265,0.01265,0.0138,0.01265,0.01265,0.01265,0.01265,0.01265,0.01035,0.01035,0.01035,0.0115,0.0115,0.0115,0.0115,0.0115,0.01265,0.01265,0.01265,0.0115,0.0115,0.01265,0.01265,0.01265,0.0115,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.0138,0.0138,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.01265,0.0138,0.0115,0.01035,0.01035,0.01035,0.0092,0.00805,0.0092,0.01035,0.0115,0.01035,0.01035,0.01035,0.0092,0.0092,0.0092,0.00805,0.0069,0.0069,0.00805,0.0069,0.00805,0.0069,0.00805,0.0069,0.00805,0.00805,0.0069,0.00575,0.00345],
                    concentration: 9.2, //micromolar
                    relativeIntensity: [],
                }, {
                    name: 'Red Dye',
                    absorbance: [0.258, 0.259, 0.258, 0.258, 0.256, 0.255, 0.253, 0.251, 0.247, 0.243, 0.24, 0.237, 0.233, 0.229, 0.226, 0.224, 0.222, 0.22, 0.217, 0.214, 0.211, 0.208, 0.206, 0.203, 0.202, 0.202, 0.2, 0.198, 0.197, 0.195, 0.194, 0.194, 0.193, 0.194, 0.193, 0.194, 0.195, 0.195, 0.195, 0.195, 0.195, 0.195, 0.197, 0.198, 0.2, 0.201, 0.203, 0.205, 0.207, 0.21, 0.213, 0.216, 0.219, 0.222, 0.226, 0.229, 0.234, 0.238, 0.243, 0.247, 0.252, 0.258, 0.264, 0.269, 0.275, 0.282, 0.29, 0.297, 0.305, 0.314, 0.323, 0.333, 0.342, 0.351, 0.36, 0.369, 0.379, 0.39, 0.402, 0.413, 0.425, 0.437, 0.449, 0.461, 0.473, 0.485, 0.498, 0.511, 0.523, 0.535, 0.548, 0.561, 0.574, 0.587, 0.6, 0.612, 0.625, 0.639, 0.652, 0.663, 0.675, 0.687, 0.699, 0.712, 0.722, 0.733, 0.742, 0.754, 0.765, 0.776, 0.786, 0.796, 0.804, 0.814, 0.824, 0.835, 0.844, 0.851, 0.859, 0.864, 0.872, 0.876, 0.885, 0.89, 0.897, 0.9, 0.905, 0.908, 0.911, 0.913, 0.915, 0.917, 0.919, 0.922, 0.922, 0.922, 0.921, 0.92, 0.918, 0.917, 0.915, 0.914, 0.912, 0.908, 0.904, 0.901, 0.896, 0.892, 0.888, 0.884, 0.879, 0.874, 0.87, 0.865, 0.859, 0.853, 0.848, 0.843, 0.836, 0.831, 0.824, 0.82, 0.812, 0.805, 0.797, 0.79, 0.783, 0.776, 0.768, 0.76, 0.75, 0.742, 0.732, 0.722, 0.709, 0.699, 0.688, 0.678, 0.665, 0.651, 0.637, 0.624, 0.61, 0.597, 0.582, 0.568, 0.554, 0.539, 0.522, 0.506, 0.489, 0.472, 0.456, 0.44, 0.425, 0.41, 0.392, 0.376, 0.36, 0.346, 0.331, 0.316, 0.302, 0.288, 0.275, 0.262, 0.249, 0.237, 0.226, 0.215, 0.205, 0.194, 0.184, 0.175, 0.166, 0.157, 0.149, 0.141, 0.135, 0.129, 0.123, 0.117, 0.111, 0.105, 0.1, 0.095, 0.091, 0.087, 0.083, 0.08, 0.076, 0.073, 0.07, 0.067, 0.065, 0.062, 0.059, 0.056, 0.054, 0.052, 0.05, 0.048, 0.046, 0.044, 0.043, 0.041, 0.04, 0.039, 0.038, 0.037, 0.037, 0.036, 0.035, 0.034, 0.033, 0.033, 0.033, 0.033, 0.032, 0.032, 0.031, 0.031, 0.031, 0.031, 0.03, 0.029, 0.028, 0.027, 0.027, 0.027, 0.027, 0.026, 0.026, 0.025, 0.025, 0.024, 0.024, 0.024, 0.024, 0.024, 0.024, 0.024, 0.023, 0.023, 0.023, 0.022, 0.023, 0.023, 0.023, 0.022, 0.022, 0.022, 0.022, 0.022, 0.022, 0.021, 0.02, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.02, 0.021, 0.021, 0.021, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.019, 0.019, 0.019, 0.02, 0.019, 0.019, 0.019, 0.019, 0.019, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.017, 0.017, 0.017, 0.017, 0.017, 0.017, 0.017, 0.017, 0.018, 0.018, 0.018, 0.017, 0.017, 0.018, 0.018, 0.018, 0.018, 0.018, 0.017, 0.017, 0.017, 0.018, 0.018, 0.018, 0.017, 0.018, 0.017, 0.017, 0.017, 0.017, 0.017, 0.017, 0.017, 0.017, 0.016, 0.016, 0.016, 0.016, 0.016, 0.015, 0.015, 0.015, 0.015, 0.015, 0.015, 0.015, 0.015, 0.015, 0.015, 0.015, 0.015, 0.016, 0.016, 0.016, 0.016, 0.015, 0.015, 0.016, 0.017, 0.016, 0.017, 0.016, 0.017, 0.017, 0.017, 0.017, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.017, 0.017, 0.017, 0.016, 0.015, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.016, 0.017, 0.016, 0.016, 0.016, 0.017, 0.017, 0.017, 0.017, 0.017, 0.017, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.018, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.019, 0.02, 0.02, 0.021, 0.02, 0.02, 0.02, 0.021, 0.021, 0.02, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.021, 0.022, 0.022, 0.021, 0.022, 0.022, 0.022, 0.022, 0.022, 0.021, 0.022, 0.022, 0.022, 0.023, 0.023, 0.022, 0.022, 0.022, 0.022, 0.023, 0.024, 0.024, 0.024, 0.024, 0.024, 0.025, 0.025, 0.026, 0.025, 0.025, 0.025, 0.026, 0.026, 0.026, 0.026, 0.026, 0.026, 0.026, 0.026, 0.026, 0.025, 0.026, 0.026, 0.027, 0.027, 0.027, 0.027, 0.027, 0.027, 0.027, 0.027, 0.028, 0.029, 0.028, 0.028, 0.028, 0.029, 0.03, 0.03, 0.03, 0.029, 0.029, 0.03, 0.031, 0.031, 0.032, 0.032, 0.032, 0.031, 0.032, 0.033, 0.034, 0.035, 0.035, 0.035, 0.035, 0.035, 0.036, 0.036, 0.036, 0.037, 0.037, 0.037, 0.037, 0.037, 0.037, 0.039, 0.039, 0.039, 0.038, 0.038, 0.038, 0.039, 0.039, 0.039, 0.038, 0.038, 0.039, 0.039, 0.04, 0.04, 0.039, 0.04, 0.04, 0.04, 0.04, 0.04, 0.041, 0.041, 0.042, 0.043, 0.044, 0.045, 0.044, 0.044, 0.045, 0.045, 0.045, 0.046, 0.047, 0.047, 0.048, 0.048, 0.048, 0.049, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.051, 0.051, 0.051],
                    concentration: 38.4, //micromolar
                    relativeIntensity: [],
                }, {
                    name: 'Potassium chromate',
                    absorbance: [0.173767,0.1798996,0.1887586,0.1979577,0.2092014,0.219764,0.2279413,0.2371404,0.2466809,0.258947,0.2712122,0.2834782,0.2933594,0.3046034,0.3151655,0.3243648,0.3332236,0.3454889,0.357755,0.3700211,0.3795616,0.3887607,0.4000044,0.410567,0.4184036,0.4245362,0.4303282,0.439528,0.4487269,0.455201,0.4613338,0.467467,0.4718965,0.4736,0.4746221,0.477007,0.477007,0.477007,0.477007,0.477007,0.4749628,0.4736,0.470874,0.4657629,0.4613338,0.4521348,0.4439572,0.4347582,0.4255586,0.4163588,0.4071595,0.3965974,0.3853534,0.3761538,0.3666141,0.354348,0.3434448,0.3287938,0.3175504,0.3066475,0.2943814,0.2810932,0.2664422,0.2538355,0.238504,0.2303264,0.2211266,0.2098832,0.199321,0.1901212,0.1809217,0.1710412,0.1591158,0.149916,0.1437834,0.1359473,0.1267478,0.119252,0.113119,0.1069858,0.1015346,0.0984682,0.095401,0.0923347,0.0865428,0.0831358,0.080069,0.078365,0.0773429,0.0742766,0.0712103,0.068144,0.068144,0.0654184,0.064737,0.063033,0.061329,0.0603069,0.0572406,0.054515,0.054515,0.054515,0.0517894,0.051108,0.0490638,0.047701,0.047701,0.0470196,0.044294,0.044294,0.0412268,0.040886,0.040886,0.0388418,0.037479,0.0364569,0.034072,0.034072,0.034072,0.0310057,0.030665,0.030665,0.030665,0.0289615,0.027258,0.027258,0.027258,0.027258,0.0241908,0.02385,0.02385,0.0218058,0.020443,0.020443,0.0197616,0.0166953,0.013629,0.0166953,0.0197616,0.0180581,0.017036,0.017036,0.017036,0.017036,0.017036,0.017036,0.017036,0.0143104,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.013629,0.0112441,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.0078364,0.008518,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.0091996,0.0071548,0.0098812,0.0078364,0.008518,0.010222,0.010222,0.010222,0.010222,0.010222,0.010222,0.0091996,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.0098812,0.0078364,0.006814,0.0067411,0.0065467,0.0063523,0.0061816,0.0059868,0.0058167,0.0056466,0.0054516,0.0052811,0.0050866,0.0049158,0.0047212,0.0045511,0.0043566,0.0041858,0.0040155,0.0038211,0.003651,0.0034558,0.003407,0.0054515,0.010222,0.0126069,0.013629,0.012266,0.006814,0.006814,0.006814,0.0074956,0.010222,0.0078364,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.0071548,0.0098812,0.0081772,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.0078364,0.010222,0.0074956,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.0064733,0.0037477,0.0057919,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.0044291,0.0051105,0.006814,0.006814,0.006814,0.006814,0.0057919,0.003407,0.0061326,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.0044291,0.003407,0.0044291,0.006814,0.0040884,0.0054512,0.006814,0.0064733,0.0037477,0.0057919,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.006814,0.0057919,0.003407,0.003407,0.003407,0.003407,0.0040884,0.0064733,0.0044291,0.0051105,0.006814,0.006814,0.006814,0.006814,0.006814,0.0061326,0.003407,0.0057919,0.006814,0.006814,0.0064733,0.0040884,0.003407,0.003407,0.0040884,0.006814,0.0044291,0.0051105,0.006814,0.0064733,0.0037477,0.0054512,0.006814,0.0061326,0.003407,0.0061326,0.0051105,0.003407,0.003407,0.003407,0.0054512,0.006814,0.0061326,0.003407,0.0061326,0.0051105,0.0044291,0.006814,0.006814,0.0044291,0.0047698,0.006814,0.006814,0.0040884,0.0051105,0.006814,0.0064733,0.0037477,0.003407,0.003407,0.0040884,0.006814,0.006814,0.006814,0.0057919,0.0037477,0.0064733,0.006814,0.0051105,0.0040884,0.006814,0.0040884,0.0054512,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],
                    concentration: 100,
                    relativeIntensity: [],
                }, {
                    name: 'Cobalt(II) nitrate',
                    absorbance: [0.032,0.0275,0.0238,0.0195,0.0162,0.014,0.0127,0.0116,0.0097,0.007,0.0052,0.005,0.0036,0.003,0.003,0.003,0.0028,0.002,0.002,0.002,0.002,0.002,0.002,0.002,0.002,0.002,0.002,0.002,0.002,0.002,0.002,0.0026,0.003,0.003,0.003,0.0034,0.005,0.005,0.005,0.005,0.0062,0.007,0.007,0.0073,0.008,0.0082,0.0098,0.01,0.01,0.0112,0.012,0.0124,0.013,0.0134,0.015,0.015,0.0166,0.0177,0.0192,0.02,0.0208,0.022,0.0222,0.023,0.023,0.0246,0.0264,0.027,0.0275,0.028,0.0286,0.03,0.0302,0.032,0.032,0.0327,0.0342,0.035,0.0358,0.0373,0.0384,0.0402,0.042,0.0429,0.0446,0.0462,0.0475,0.0488,0.0509,0.0534,0.0553,0.058,0.0598,0.0624,0.0658,0.0685,0.0712,0.0742,0.0776,0.0805,0.085,0.0877,0.092,0.0958,0.0988,0.102,0.1065,0.111,0.1155,0.12,0.1263,0.131,0.1362,0.141,0.1458,0.1521,0.1582,0.1637,0.17,0.1763,0.1818,0.1893,0.1956,0.2025,0.2088,0.2148,0.2226,0.228,0.2343,0.2406,0.2476,0.2542,0.2605,0.266,0.2682,0.2652,0.267,0.2823,0.2904,0.2955,0.3,0.3045,0.3082,0.3112,0.3145,0.319,0.3235,0.328,0.3311,0.335,0.3382,0.341,0.345,0.3482,0.3525,0.3555,0.3576,0.3593,0.362,0.3644,0.3662,0.3682,0.3708,0.3741,0.3749,0.3785,0.382,0.3849,0.388,0.392,0.396,0.4,0.4045,0.4079,0.4105,0.4145,0.4185,0.423,0.427,0.431,0.435,0.4395,0.4428,0.4465,0.4505,0.4543,0.457,0.4594,0.4624,0.4644,0.4658,0.4691,0.4699,0.4714,0.472,0.472,0.472,0.472,0.472,0.4708,0.47,0.4691,0.4668,0.4652,0.4629,0.4602,0.4574,0.454,0.45,0.4455,0.4415,0.4375,0.4332,0.4283,0.422,0.4164,0.4102,0.399,0.3864,0.385,0.385,0.3794,0.372,0.3638,0.3576,0.352,0.3424,0.334,0.326,0.319,0.3108,0.3012,0.292,0.2834,0.2762,0.27,0.262,0.2548,0.2463,0.238,0.2306,0.2242,0.2178,0.2116,0.2048,0.1991,0.1928,0.1862,0.1803,0.1732,0.1676,0.1606,0.1546,0.1481,0.1418,0.136,0.1296,0.124,0.1168,0.115,0.1144,0.113,0.1088,0.1045,0.101,0.097,0.0942,0.0915,0.089,0.085,0.0815,0.0788,0.076,0.0725,0.0706,0.0688,0.0662,0.0634,0.0623,0.0604,0.0579,0.0571,0.0546,0.0526,0.0518,0.0502,0.0488,0.0477,0.047,0.047,0.0458,0.0444,0.0429,0.0422,0.042,0.0414,0.04,0.04,0.039,0.038,0.038,0.0372,0.037,0.037,0.037,0.037,0.036,0.035,0.035,0.035,0.035,0.035,0.035,0.0336,0.033,0.033,0.033,0.033,0.0326,0.032,0.032,0.032,0.032,0.032,0.032,0.032,0.032,0.0318,0.0302,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.0294,0.028,0.028,0.028,0.0284,0.03,0.0284,0.029,0.03,0.03,0.0284,0.028,0.028,0.028,0.028,0.028,0.028,0.028,0.028,0.0274,0.0274,0.0279,0.0271,0.027,0.027,0.027,0.027,0.027,0.027,0.027,0.027,0.027,0.0262,0.025,0.025,0.025,0.025,0.025,0.025,0.025,0.024,0.023,0.023,0.023,0.023,0.0227,0.022,0.022,0.022,0.022,0.0218,0.0204,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.0186,0.018,0.018,0.018,0.0172,0.017,0.017,0.017,0.017,0.017,0.017,0.017,0.017,0.0154,0.0162,0.0162,0.0146,0.0132,0.0144,0.014,0.013,0.013,0.013,0.013,0.0138,0.0144,0.0123,0.012,0.012,0.012,0.012,0.012,0.012,0.0112,0.0104,0.012,0.0106,0.01,0.01,0.0098,0.0084,0.0092,0.0092,0.008,0.008,0.008,0.009,0.0094,0.008,0.008,0.0074,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.0058,0.0058,0.007,0.007,0.0054,0.006,0.007,0.0068,0.0052,0.005,0.005,0.005,0.005,0.005,0.005,0.005,0.005,0.005,0.005,0.005,0.0046,0.003,0.003,0.003,0.003,0.0032,0.0048,0.005,0.004,0.003,0.003,0.003,0.003,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],
                    concentration: 100,
                    relativeIntensity: [],
                }

                ],
                foodDyeSamples: [
                    {
                        name: 'Yellow Dye',
                        absorbance: [0.855196678,0.855196678,0.857270303,0.861703849,0.865668549,0.871570923,0.873444153,0.874830935,0.877183418,0.876016463,0.876910201,0.87705916,0.877343741,0.876281139,0.876404955,0.878013591,0.883075241,0.885569911,0.894379747,0.898476025,0.90230789,0.906669574,0.914032991,0.920158569,0.927204031,0.93335391,0.939530248,0.943186571,0.94929619,0.95553629,0.964501314,0.968095582,0.972755626,0.978375709,0.98211823,0.986952783,0.991236918,0.995559753,0.999275233,1.001349262,1.004710618,1.008255532,1.012907422,1.012004625,1.012121697,1.012530672,1.014966948,1.017479479,1.017611191,1.016174038,1.014290296,1.013855066,1.01387066,1.011452383,1.005321445,1.003627595,0.999539271,0.995413791,0.990790117,0.986525768,0.981768564,0.975138771,0.967484719,0.960054547,0.952752999,0.946245179,0.938478569,0.929625408,0.911411868,0.899992038,0.890671698,0.878263171,0.867878058,0.855562766,0.844558343,0.833697696,0.822449601,0.809193319,0.795077336,0.779595819,0.752032187,0.737665222,0.723098155,0.707318483,0.692672542,0.677524644,0.662777012,0.647476824,0.63204663,0.617913189,0.603705696,0.588050488,0.55655331,0.542392106,0.5272986,0.512526569,0.498065446,0.481858414,0.465953451,0.449899859,0.435219563,0.420554375,0.405023577,0.390593961,0.359590228,0.343479076,0.328347917,0.313434493,0.299047329,0.285036717,0.270408612,0.256328755,0.243096584,0.230279009,0.217123339,0.204628465,0.192621728,0.169206509,0.158295165,0.148625121,0.139448408,0.130826459,0.122603752,0.114733249,0.106420017,0.099152713,0.092082441,0.086533934,0.080262206,0.069595125,0.065115572,0.060297709,0.056093855,0.051796451,0.048243621,0.044807295,0.041837573,0.038687858,0.035806705,0.032887365,0.030461116,0.02708888,0.025274622,0.023141564,0.021549714,0.020257179,0.019417547,0.018291515,0.017226349,0.015989216,0.01490777,0.014097067,0.013242439,0.012665055,0.012053571,0.01155359,0.010327981,0.009683202,0.009316401,0.009271711,0.008527647,0.007656804,0.00799977,0.007707508,0.007492821,0.006363211,0.00601746,0.005574786,0.004749585,0.003926262,0.003800738,0.003856069,0.004241414,0.00416705,0.003712267,0.003455832,0.002894262,0.002667201,0.002263582,0.002200121,0.002434081,0.002128385,0.002464441,0.002215605,0.00239374,0.00188285,0.001812512,0.001535906,0.001467932,0.001222175,0.001334174,0.000833336,0.000934794,0.000827196,0.001186249,0.000601631,0.000475156,8.39559E-05,-0.000184379,-0.000486308,-0.000844564,-0.001318266,-0.001432921,-0.001363118,-0.001488126,-0.002387083,-0.002802958,-0.002052989,-0.001267756,-0.001367352,-0.002102145,-0.002413264,-0.002803586,-0.002690344,-0.002579127,-0.002867801,-0.002768926,-0.002763133,-0.002720898,-0.003230509,-0.003145779,-0.003311411,-0.00313572,-0.00320341,-0.002650657,-0.003037602,-0.003056886,-0.00351668,-0.002833277,-0.002109607,-0.001430721,-0.001297551,-0.001647849,-0.002263652,-0.002595734,-0.002855325,-0.002518076,-0.00251634,-0.002916583,-0.003112349,-0.003086034,-0.002420802,-0.002917079,-0.003121937,-0.003482423,-0.003265,-0.003191192,-0.003472001,-0.003399052,-0.003368045,-0.003176726,-0.003220116,-0.003492426,-0.003527958,-0.003331528,-0.003402614,-0.003379519,-0.004183849,-0.004139742,-0.004213697,-0.003668546,-0.003802784,-0.003953549,-0.004430037,-0.004278579,-0.004253401,-0.003629745,-0.004130256,-0.004014802,-0.004457568,-0.004347628,-0.004430351,-0.004587504,-0.004788752,-0.005097735,-0.004980152,-0.004787399,-0.004593132,-0.004720544,-0.004254547,-0.004413402,-0.004218264,-0.004726315,-0.00468604,-0.00468604,-0.003769021,-0.003769021,-0.003572871,-0.004143636,-0.004143636,-0.004169175,-0.004281378,-0.003853026,-0.003815339,-0.004050392,-0.004693751,-0.00529987,-0.005180814,-0.005177357,-0.004691169,-0.005018162,-0.005414238,-0.006202377,-0.006129359,-0.005967982,-0.005638142,-0.005793506,-0.005675545,-0.005707625,-0.005822872,-0.005733349,-0.005791761,-0.005782964,-0.006305328,-0.006634465,-0.006973813,-0.007065515,-0.00684918,-0.006777727,-0.006726331,-0.007093577,-0.00740383,-0.007482277,-0.007557922,-0.007196613,-0.00746535,-0.007357934,-0.00773007,-0.006909899,-0.006901205,-0.006815075,-0.007330112,-0.007403646,-0.007398838,-0.007294404,-0.006996283,-0.006680287,-0.006724075,-0.007027594,-0.007246582,-0.007390182,-0.007132877,-0.006953539,-0.006743692,-0.007210531,-0.007141639,-0.006983917,-0.006488041,-0.007016164,-0.00683666,-0.00681107,-0.006360105,-0.006299444,-0.006218299,-0.006012217,-0.006487967,-0.0062951,-0.006271448,-0.006003708,-0.006174796,-0.00620816,-0.006128799,-0.006460473,-0.006831841,-0.007028681,-0.006360773,-0.005866547,-0.005306551,-0.005182868,-0.00521691,-0.005622616,-0.005789162,-0.005968969,-0.0061065,-0.006533121,-0.006656512,-0.006930183,-0.006685604,-0.006514416,-0.005837978,-0.005934988,-0.006252727,-0.006815581,-0.007237749,-0.006967482,-0.007152485,-0.006674273,-0.006893229,-0.007028452,-0.007312046,-0.005938889,-0.005938889,-0.006609072,-0.006609072,-0.00766242,-0.00766242,-0.006884183,-0.007087108,-0.006971776,-0.007296224,-0.007028725,-0.0071936,-0.007180183,-0.007253389,-0.006926512,-0.006926512,-0.006908979,-0.007344337,-0.007703775,-0.007514437,-0.006841633,-0.006982912,-0.007382099,-0.00745496,-0.006876174,-0.006221909,-0.006614689,-0.007084017,-0.007551267,-0.0071045,-0.006961442,-0.006218756,-0.006339845,-0.006330292,-0.006901346,-0.006758481,-0.0065281,-0.006559109,-0.006887448,-0.006772541,-0.006917377,-0.006605201,-0.006716646,-0.006678382,-0.006603741,-0.006977097,-0.006630059,-0.006552076,-0.006445159,-0.006135876,-0.006782195,-0.005638308,-0.005860281,-0.005957328,-0.006833152,-0.007116142,-0.006710208,-0.006710208,-0.006511756,-0.006573166,-0.006222232,-0.005689324,-0.005689324,-0.00535329,-0.005736126,-0.005949808,-0.006577957,-0.006713388,-0.006704454,-0.006769938,-0.007149122,-0.007267635,-0.00735901,-0.007116753,-0.007383429,-0.007295106,-0.007176213,-0.007213176,-0.007016397,-0.007193356,-0.006700761,-0.007032117,-0.007846498,-0.007733453,-0.008488648,-0.008158018,-0.008870511,-0.008314626,-0.00889489,-0.008831937,-0.008943505,-0.008940729,-0.009359633,-0.009175723,-0.008919602,-0.008692675,-0.009215971,-0.008982826,-0.009137541,-0.008700514,-0.008975817,-0.008431873,-0.008174255,-0.007547479,-0.007547479,-0.008448678,-0.009279077,-0.009653057,-0.008870248,-0.008696206,-0.008105164,-0.008108034,-0.007669754,-0.007273405,-0.007460297,-0.007273282,-0.008692057,-0.008775991,-0.008852734,-0.007748537,-0.007719327,-0.007355331,-0.00753625,-0.007086566,-0.007516034,-0.007595615,-0.007487046,-0.007232571,-0.007216297,-0.007758343,-0.008051153,-0.007947381,-0.007135204,-0.006655834,-0.006364609,-0.006670835,-0.007029263,-0.007227077,-0.006955703,-0.007310485,-0.007604966,-0.008232167,-0.007498328,-0.007208562,-0.00693825,-0.006959555,-0.006856702,-0.006710795,-0.006936789,-0.007134393,-0.006766597,-0.00720333,-0.00720333,-0.007215697,-0.007659989,-0.007191511,-0.006993063,-0.007182393,-0.008103519,-0.008944816,-0.009613201,-0.00920287,-0.008813347,-0.008086203,-0.007592265,-0.007578335,-0.00807045,-0.008412723,-0.00872634,-0.008498935,-0.008576839,-0.008698562,-0.00899083,-0.008831794,-0.008892152,-0.009715597,-0.009535007,-0.009043281,-0.009069236,-0.009565513,-0.009392057,-0.008931674,-0.009804492,-0.008980127,-0.009235897,-0.009924937,-0.010723553,-0.010642564,-0.010558332,-0.010609844,-0.010723329,-0.010837544,-0.010859259,-0.010371608,-0.011257663,-0.010910006,-0.01028068,-0.010184561,-0.01059429,-0.010419293,-0.010524795,-0.010467409,-0.010159094,-0.010078375,-0.009920295,-0.010051259,-0.010234643,-0.010405783,-0.010893595,-0.011198416,-0.011119607,-0.010900587,-0.010742996,-0.010568405,-0.010715073,-0.011823647,-0.011015034,-0.00961672,-0.008805372,-0.009453749,-0.010450756,-0.011711761,-0.011516662,-0.011013595,-0.009626836,-0.008929465,-0.008209031,-0.00937361,-0.009796387,-0.009472279,-0.010243567,-0.010725158,-0.009910342,-0.009504481,-0.009068889,-0.008707722,-0.009442415,-0.009405505,-0.008356831,-0.008924829,-0.008313249,-0.009705069,-0.010273747,-0.009291809,-0.008324985],
                        concentration: 45,
                        relativeIntensity: [],
                    },
                    {
                        name: 'Green Dye',
                        absorbance: [0.951170594,0.951170594,0.950132349,0.953674398,0.958680106,0.971102238,0.974196604,0.977525913,0.977796693,0.978747967,0.981682938,0.983952942,0.985192507,0.982962689,0.981695042,0.978841061,0.979521881,0.980242336,0.986860018,0.98959221,0.993201462,0.996915913,1.005212418,1.01124386,1.016594126,1.020181342,1.024979815,1.030965119,1.038962504,1.044357329,1.050968332,1.055657127,1.059467538,1.064513355,1.065351741,1.06748895,1.068514855,1.072636345,1.072785087,1.073748055,1.073275272,1.074162182,1.07395423,1.072798855,1.070552124,1.068505836,1.067816109,1.066355197,1.064257449,1.059482838,1.05609178,1.051215083,1.049617259,1.045639906,1.03900972,1.035712842,1.02915335,1.025440077,1.020244095,1.015234468,1.007741533,1.001209578,0.992891438,0.986873123,0.979529263,0.972173033,0.962793469,0.953029729,0.934643921,0.925343159,0.915750066,0.905330427,0.893993725,0.882626022,0.871983377,0.860955449,0.849388455,0.836204195,0.822512387,0.809436995,0.786289273,0.770945181,0.756256875,0.739671417,0.727274504,0.713108993,0.700507496,0.684691905,0.670332729,0.65612515,0.642401363,0.627821401,0.597537684,0.582719555,0.566929485,0.552745803,0.538541676,0.522951179,0.507634006,0.493258466,0.47877275,0.464652733,0.448469481,0.434484189,0.405525526,0.390948997,0.376545689,0.36182534,0.347777208,0.333923031,0.320787497,0.306547611,0.293098034,0.280062954,0.268525785,0.25678858,0.245707477,0.223449744,0.212892299,0.203231175,0.193935576,0.185537191,0.1773092,0.170056261,0.162292404,0.155680471,0.148780186,0.142662086,0.136347817,0.126367534,0.121496612,0.117458573,0.112942261,0.109431942,0.105698579,0.102563108,0.09957397,0.096391062,0.092869543,0.089726645,0.087700428,0.084911362,0.083213173,0.081741864,0.080821314,0.079689114,0.078989199,0.077878514,0.077282494,0.076420097,0.076537616,0.075944351,0.076072686,0.075895877,0.076763465,0.076749781,0.077172949,0.077005374,0.077807979,0.078282396,0.079239086,0.079633702,0.080419521,0.081220769,0.082603903,0.08346991,0.084698216,0.085971184,0.087624824,0.088200926,0.089870792,0.09194816,0.093833242,0.095823042,0.097451085,0.099351029,0.100865197,0.102610819,0.104255316,0.106407611,0.108844805,0.111032045,0.112742446,0.115153663,0.118024892,0.121207773,0.124093206,0.126717369,0.129482028,0.132022794,0.135268567,0.137985056,0.141448396,0.144262408,0.1484759,0.151687682,0.155283064,0.159139299,0.163140854,0.167497912,0.171488367,0.175706766,0.179988962,0.184296113,0.189008572,0.19335218,0.198025928,0.202811776,0.207765178,0.212821811,0.21748263,0.22335667,0.228429063,0.233959977,0.24498869,0.251057341,0.256108623,0.262274641,0.267992983,0.274153799,0.280419978,0.286305394,0.292615512,0.298264494,0.303719217,0.308258347,0.314067105,0.31956816,0.326348076,0.33198856,0.338161519,0.343031983,0.347428546,0.352035942,0.357898535,0.363699068,0.370599384,0.375959692,0.381946239,0.38662412,0.392310279,0.398631343,0.404889431,0.411098902,0.417131962,0.424335656,0.431034489,0.438339191,0.445949561,0.454440933,0.462215291,0.469547338,0.478654639,0.488649803,0.499218919,0.509384484,0.521169912,0.533744374,0.5464923,0.559631918,0.572265544,0.585474281,0.598796569,0.61345576,0.627299545,0.642056446,0.657504952,0.673719308,0.689612049,0.705656005,0.723679677,0.740621151,0.757743581,0.77358897,0.792445218,0.809313898,0.82684313,0.84139634,0.857495021,0.872128246,0.886359592,0.898622347,0.911605884,0.936547976,0.936547976,0.954287883,0.954287883,0.962515328,0.976658451,0.976658451,0.982602236,0.985232354,0.985787759,0.986407955,0.981102154,0.97494444,0.967025357,0.961578181,0.954674012,0.945053502,0.932526952,0.918506748,0.903666441,0.887132083,0.869298981,0.85093787,0.83037112,0.806816525,0.781787677,0.75740168,0.732801092,0.706660171,0.681010196,0.656161401,0.630428923,0.603969054,0.577139579,0.552150665,0.526754638,0.502630214,0.478393535,0.454644425,0.431290277,0.408337581,0.387230183,0.366353523,0.34640287,0.327294459,0.309494699,0.291762586,0.274602458,0.257950124,0.243185683,0.2291961,0.215624607,0.202800389,0.190787725,0.178589257,0.168007666,0.156946136,0.147683693,0.13888842,0.130782726,0.12345469,0.115732334,0.108891731,0.102734383,0.09673864,0.091453282,0.086173017,0.08153424,0.076750866,0.072599592,0.069093656,0.065445799,0.062138536,0.058586822,0.055998434,0.053217905,0.05091313,0.048142125,0.045364393,0.042252352,0.040436461,0.038567979,0.037564755,0.035929731,0.035001492,0.033545414,0.032577018,0.030869377,0.029207438,0.027827469,0.026723526,0.025771346,0.02462777,0.023667863,0.023206008,0.022369773,0.021668112,0.021136049,0.020299425,0.019590256,0.018208174,0.017382654,0.016984689,0.017334802,0.016396548,0.01580221,0.01485216,0.015130363,0.015130363,0.013787282,0.013787282,0.012757949,0.012757949,0.012699885,0.011845378,0.011598164,0.010934105,0.011610216,0.010981116,0.011394739,0.010420613,0.010710871,0.010710871,0.010339117,0.010446758,0.010550617,0.010302331,0.010288746,0.009957206,0.009231915,0.009315072,0.009425999,0.010143128,0.009877069,0.009432567,0.009395439,0.009249444,0.009289982,0.009051564,0.009109865,0.009306403,0.009588063,0.009468947,0.009333755,0.008800712,0.00905162,0.00918483,0.009525206,0.009085754,0.008814294,0.008422369,0.00854413,0.008415716,0.008730728,0.008840433,0.008784384,0.008931396,0.008823226,0.009605936,0.009283343,0.009222805,0.00877297,0.008693223,0.008671253,0.008671253,0.008308086,0.008653276,0.008120066,0.008482973,0.008482973,0.009518531,0.009735917,0.009422647,0.009190487,0.008982039,0.008946002,0.008558976,0.008193556,0.008006568,0.007934304,0.00841566,0.008216746,0.008279591,0.007752608,0.008192723,0.008224266,0.008093058,0.007689517,0.007817489,0.007009936,0.007480661,0.006622934,0.007180414,0.006280705,0.00657077,0.006443883,0.006920027,0.006647771,0.006113468,0.005827588,0.005879387,0.006306556,0.006061027,0.005503042,0.005161459,0.005394703,0.005967576,0.006253245,0.005971791,0.006395315,0.00674468,0.00674468,0.007009308,0.006215535,0.006393747,0.005964337,0.006679762,0.006808016,0.006946419,0.006291214,0.006046808,0.006200258,0.006455182,0.00632313,0.006268575,0.007073687,0.007093283,0.007313971,0.006723097,0.006783887,0.006837787,0.006445516,0.006000337,0.005928125,0.006514214,0.007351278,0.006854368,0.006828799,0.006178711,0.006527206,0.006533488,0.006691368,0.007252809,0.006826467,0.006695888,0.006548709,0.006622338,0.007066956,0.006483424,0.007140328,0.006687942,0.006827689,0.006333787,0.007109089,0.007410292,0.00753924,0.006420567,0.006241517,0.006268783,0.006268783,0.007523537,0.008421055,0.008512317,0.007867729,0.006774602,0.0065746,0.006383744,0.006450965,0.006744808,0.007222156,0.006952896,0.006099974,0.005997305,0.006074734,0.006688531,0.005842829,0.005499864,0.005096982,0.005368838,0.005802348,0.006314561,0.00517974,0.004158172,0.003779662,0.003969173,0.004931786,0.004968407,0.004922878,0.00369186,0.003375269,0.004188042,0.004317706,0.004191901,0.003556558,0.003231923,0.003715381,0.003630402,0.00298422,0.002877032,0.003908348,0.004070831,0.003133901,0.003247194,0.004286658,0.003452902,0.003263021,0.00278642,0.003635415,0.004032222,0.004004713,0.004191836,0.003333081,0.003499573,0.003623027,0.004300892,0.003468056,0.002844397,0.003144579,0.002878365,0.003079706,0.002785455,0.002837082,0.002156612,0.003496774,0.004342815,0.00576659,0.004659535,0.004129556,0.002908584,0.00281072,0.002717356,0.004177421,0.004742194,0.005705498,0.00473812,0.003381733,0.00290256,0.003633459,0.004664973,0.005418201,0.005271579,0.005298106,0.005053461,0.00507739,0.005323028,0.005078542,0.005632608,0.005626728,0.005042473,0.005084017,0.006185013,0.00744893],
                        concentration: 1,
                        relativeIntensity: [],
                    }
                ],
                currentIntensity: new Array(wavelengths.length).fill(0),
                actualLampIntensity: new Array(wavelengths.length).fill(0),
                referenceIntensity: new Array(wavelengths.length).fill(0),

                datasets: [
                    {
                        hidden: false,
                        label: 'Intensity',
                        backgroundColor: '#249EBF',
                        borderColor: '#249EBF',
                        pointRadius: 0,
                        pointStyle: 'line',
                        fill: false,
                        data: [],
                    },
                    {
                        hidden: false,
                        label: 'Reference Intensity',
                        backgroundColor: '#696969',
                        borderColor: '#696969',
                        borderDash: [10, 10],
                        pointRadius: 0,
                        pointStyle: 'line',
                        fill: false,
                        data: [],
                    },
                    {
                        hidden: true,
                        label: 'Sample % Transmittance',
                        yAxisID: 'y-axis-1',
                        backgroundColor: '#c30009',
                        borderColor: '#c30009',
                        borderDash: [20, 5],
                        pointRadius: 0,
                        pointStyle: 'line',
                        fill: false,
                        data: []
                    },
                    {
                        hidden: true,
                        label: 'Sample Absorbance',
                        yAxisID: 'y-axis-2',
                        backgroundColor: '#2b88c3',
                        borderColor: '#2b88c3',
                        borderDash: [15, 3, 3, 3],
                        pointRadius: 0,
                        pointStyle: 'line',
                        fill: false,
                        data: []
                    }
                ],
                options: {
                    legend: false,
                    tooltips: {
                        intersect: false,
                        axis: 'x',
                        callbacks: {
                            title: function(tooltipItem) {
                                return 'Wavelength: ' + tooltipItem[0].xLabel + ' nm';
                            }
                        },
                    },
                    scales: {
                        xAxes: [{
                            type: 'linear',
                            position: 'bottom',
                            ticks: {
                                min: 380,
                                max: 900,
                            },
                            scaleLabel: {
                                display: true,
                                labelString: 'Wavelength (nm)',
                            }
                        }],
                        yAxes: [{
                            id: 'y-axis-0',
                            scaleLabel: {
                                display: true,
                                labelString: 'Intensity (counts)',
                            },
                            ticks: {
                                suggestedMax: 3500,
                            }
                        },
                            {
                                id: 'y-axis-1',
                                display: false,
                                position: 'right',
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Transmittance (%)',
                                },
                                ticks: {
                                    suggestedMax: 100,
                                },
                                gridLines: {
                                    drawOnChartArea: false, // only want the grid lines for one axis to show up
                                },
                            },
                            {
                                id: 'y-axis-2',
                                display: false,
                                position: 'left',
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Absorbance',
                                },
                                ticks: {
                                    suggestedMax: 1,
                                },
                                gridLines: {
                                    drawOnChartArea: false,
                                },
                            }
                        ],


                    },
                    responsive: true,
                    maintainAspectRatio: false,
                }
            }
        },
        methods: {
            toggleHideForDataSet(i) {
                let set = this.datasets[i];
                set.hidden = !set.hidden;
                this.datasets.splice(i,1,set);
            },
            toggleAxis(i) {
                let axis = this.options.scales.yAxes[i];
                axis.display = !axis.display;
                this.options.scales.yAxes.splice(i,1,axis);
            },
            initLamp() {
                let lamp = this.lamps[this.selected.lamp];
                return this.integratedIntensity(this.state.integration, this.state.saturation, lamp.intensity, lamp.referenceIntegration);
            },
            initializeSampleIntensities() {
                this.samples.forEach(s=>{
                    let intensity = absorbanceToIntensity(s.absorbance,this.actualLampIntensity);
                    intensity = intensity.map(x => x > this.state.saturation ? this.state.saturation : x);
                    s.relativeIntensity = intensity;
                });
            },
            insertSample() {
                this.currentIntensity = this.samples[this.selected.sample].relativeIntensity;
                this.state.sample = true;
            },
            integratedIntensity(instrumentIntegration, instrumentSaturation, intensity, intensityIntegrationReference) {
                //Set values based on integration time
                intensity = intensity.map(x => x * instrumentIntegration / intensityIntegrationReference);
                this.actualLampIntensity = intensity;
                //Simulate saturated detector if intensity is greater than saturation threshold
                this.state.saturationWarning = intensity.some(x => x > instrumentSaturation);
                this.state.lowLampWarning = Math.max(...intensity) < 0.5 * instrumentSaturation;
                intensity = intensity.map(x => x > instrumentSaturation ? instrumentSaturation : x);
                return intensity;
            },
            makePoints(yArr) {
                let pointsArr = [];
                for (let i = 0; i < yArr.length; i++) {
                    pointsArr.push({x: this.wavelengths[i], y: yArr[i].toFixed(3)});
                }
                return pointsArr;
            },
            startLamp() {
                this.state.lamp = true;
                this.updateLamp();
                this.initializeSampleIntensities();
            },
            stopLamp() {
                this.currentIntensity = new Array(this.wavelengths.length).fill(0);
                this.state.lamp = false;
            },
            storeReference() {
                if(!this.state.lamp)
                    return;
                let set = this.datasets[1];
                set.data = this.makePoints(this.currentIntensity);
                this.datasets.splice(1,1,set);
                this.state.reference = true;
                this.referenceIntensity = this.currentIntensity;
                this.state.sample = true;
                this.state.referenceWarning = false;
                this.state.referenceIntegration = this.state.integration;
                this.updateCurrentSample();
            },
            updateCurrentSample() {
                //Intensity
                let set = this.datasets[0];
                set.data = this.makePoints(this.currentIntensity);
                this.datasets.splice(0,1,set);

                //Only continue if a reference spectrum is stored.
                if(!this.state.reference)
                    return;

                // Percent Transmission
                set = this.datasets[2];
                let percentTransmittance = this.currentIntensity.map((x,i)=> x/this.referenceIntensity[i]*100);
                set.data = this.makePoints(percentTransmittance);
                this.datasets.splice(2,1,set);

                // Absorbance
                set = this.datasets[3];
                set.data = this.makePoints(transmittanceToAbsorbance(percentTransmittance.map(x=>x/100)));
                this.datasets.splice(3,1,set);
            },
            updateIntensityFromConcentration() {
                if(this.concentration === 0) {
                    this.currentIntensity = this.samples[this.selected.sample].relativeIntensity;
                    return;
                }
                if(!this.state.reference)
                    return;

                let abs = intensityToAbsorbance(this.samples[this.selected.sample].relativeIntensity, this.referenceIntensity);
                abs = abs.map(x=> x* this.concentration / this.samples[this.selected.sample].concentration);
                let intensity = absorbanceToIntensity(abs, this.referenceIntensity);
                this.currentIntensity = intensity;
            },
            updateLamp() {
                if(!this.state.lamp)
                    return;
                this.currentIntensity = this.initLamp();
            },
            addFoodDyeSets() {
                this.samples = this.samples.concat(this.foodDyeSamples);
                console.log("concat",this.samples,this.foodDyeSamples);
            }
        },
        computed: {
            integration() {
                return this.state.integration;
            },
            datacollection() {
                return {
                    datasets: this.datasets,
                }
            },
            anyIntensity() {
                return !(this.datasets[0].hidden && this.datasets[1].hidden);
            },
            concentration() {
                return this.selected.concentration;
            },
            sample() {
                return this.selected.sample;
            }
        },
        watch: {
            integration() {
                this.updateLamp();
                if(this.state.reference && this.state.referenceIntegration !== this.state.integration)
                    this.state.referenceWarning = true;
                if(this.state.referenceWarning && this.state.referenceIntegration == this.state.integration)
                    this.state.referenceWarning = false;
                this.initializeSampleIntensities();
                this.insertSample();
            },
            currentIntensity() {
                this.updateCurrentSample();
            },
            anyIntensity() {
                let axis = this.options.scales.yAxes[0];
                axis.display = this.anyIntensity;
                this.options.scales.yAxes.splice(0,1,axis);
            },
            concentration() {
                this.updateIntensityFromConcentration();
            },
            sample() {
                this.selected.concentration = this.samples[this.selected.sample].concentration;
                this.insertSample();
            },

        },
        mounted() {
            let set = this.datasets[0];
            set.data = this.makePoints(this.currentIntensity);
            this.datasets.splice(0,1,set);

            this.selected.concentration = this.samples[this.selected.sample].concentration;

            let virtual = checkVirtualLab();
            if(virtual !== false) {
                if(virtual === "FoodDyes")
                    this.addFoodDyeSets();
            }
        }
    }

    function absorbanceToTransmittance(arr) {
        return arr.map(x=>10**(-1*x));
    }

    function transmittanceToAbsorbance(arr) {
        return arr.map(x=>-1*Math.log10(x));
    }

    function transmittanceToIntensity(T,I0) {
        return T.map((x,i) => x*I0[i]);
    }

    function absorbanceToIntensity(abs,I0) {
        return transmittanceToIntensity(absorbanceToTransmittance(abs),I0);
    }

    function intensityToTransmittance(I,I0) {
        return I.map((x,i) => x/I0[i]);
    }

    function intensityToAbsorbance(I,I0) {
        return transmittanceToAbsorbance(intensityToTransmittance(I,I0));
    }

    function checkVirtualLab() {
        let params = getParams();
        if(params && params.lab)
            return params.lab;

        return false;
    }

    function getParams() {
        let uri = window.location.href.split('?');
        if (uri.length === 2)
        {
            let vars = uri[1].split('&');
            let getVars = {};
            let tmp = '';
            vars.forEach(function(v){
                tmp = v.split('=');
                if(tmp.length === 2)
                    getVars[tmp[0]] = tmp[1];
            });
            console.log(getVars);
            return getVars;
        }
    }

</script>